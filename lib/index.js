var Promise,addAll,clone,commit,config,configAll,exec,moment,push;Promise=require("es6-promise").Promise,moment=require("moment"),exec=require("./exec"),addAll=function(r){var e,n;return n=r.directory,e="git add --all",exec(e,{cwd:n})},clone=function(r){var e,n,t,o;return e=r.branchName,t=r.directory,o=r.repository,n="git clone --branch "+e+" "+o+" "+t,exec(n)},commit=function(r){var e,n,t;return n=r.directory,t=r.message,e="git commit --allow-empty --message '"+t+"'",exec(e,{cwd:n})},config=function(r){var e,n,t,o;return n=r.directory,t=r.name,o=r.value,e="git config --local "+t+" '"+o+"'",exec(e,{cwd:n})},configAll=function(r){var e,n,t,o;return e=r.configs,n=r.directory,t=r.error,o=r.log,e.reduce(function(r,e){var c,i;return c=e.name,i=e.value,r.then(function(){return config({directory:n,name:c,value:i})}).then(function(r){var e,n;return n=r.stdout,e=r.stderr,o(n),t(e),null})},Promise.resolve())},push=function(r){var e,n,t,o,c;return n=r.directory,t=r.dst,o=r.repository,c=r.src,e="git push '"+o+"' "+c+":"+t,exec(e,{cwd:n})},module.exports=function(r){var e,n,t,o,c,i,u,l,s,a,d,m,f,g,h;return e=null!=(l=r.branchName)?l:"gh-pages",n=null!=(s=r.configs)?s:[],t=null!=(a=r.directory)?a:"public",c=null!=(d=r.error)?d:console.error.bind(console),i=null!=(m=r.log)?m:console.log.bind(console),u=null!=(f=r.message)?f:moment().format(),g=r.repository,o=e,h=e,clone({branchName:e,directory:t,repository:g}).then(function(r){var e,n;return n=r.stdout,e=r.stderr,i(n),c(e)}).then(function(){return addAll({directory:t})}).then(function(r){var e,n;return n=r.stdout,e=r.stderr,i(n),c(e)}).then(function(){return configAll({configs:n,directory:t,error:c,log:i})}).then(function(){return commit({directory:t,message:u})}).then(function(r){var e,n;return n=r.stdout,e=r.stderr,i(n),c(e)}).then(function(){return push({repository:g,src:h,dst:o})}).then(function(r){var e,n;return n=r.stdout,e=r.stderr,i(n),c(e),null})};